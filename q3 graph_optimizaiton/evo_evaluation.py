import numpy as np
from scipy.spatial.transform import Rotation as R

'''initial_pose'''
# poses = np.array([
#     [0.0, 0.0, 0.0],
#     [-0.146303, 0.52145, 0.463171],
#     [-0.483216, 0.881682, 1.019],
#     [-0.956247, 0.992529, 1.47808],
#     [-1.5145, 0.919746, 1.97284],
#     [-1.96216, 0.599956, 2.55723],
#     [-2.14286, 0.136549, 3.13284],
#     [-2.00857, -0.330487, -2.64456],
#     [-1.63789, -0.746245, -2.07607],
#     [-1.11791, -0.885967, -1.5782],
#     [-0.632563, -0.731991, -1.11388],
#     [-0.237955, -0.40841, -0.64978]
# ])

'''optimized_pose'''
# poses = np.array([
#     [6.89658e-17, -1.96267e-16, 2.98358e-16],
#     [-0.142843, 0.510642, 0.486148],
#     [-0.484483, 0.85223, 1.06245],
#     [-0.958422, 0.931622, 1.53715],
#     [-1.50794, 0.815206, 2.04118],
#     [-1.92926, 0.454785, 2.62905],
#     [-2.07279, -0.0312017, 3.2049],
#     [-1.90176, -0.498165, -2.57202],
#     [-1.49846, -0.896772, -2.00008],
#     [-0.965912, -1.00742, -1.49338],
#     [-0.491896, -0.82369, -1.01447],
#     [-0.12789, -0.473351, -0.530638]
# ])

'''g2o_pose(from the next question)'''
poses = np.array([
    [0, 0, 0],
    [-0.142843, 0.510642, 0.486148],
    [-0.484483, 0.85223, 1.06245],
    [-0.958422, 0.931622, 1.53715],
    [-1.50794, 0.815206, 2.04118],
    [-1.92926, 0.454785, 2.62905],
    [-2.07279, -0.0312017, 3.2049],
    [-1.90176, -0.498165, -2.57202],
    [-1.49846, -0.896772, -2.00008],
    [-0.965912, -1.00742, -1.49338],
    [-0.491896, -0.82369, -1.01447],
    [-0.12789, -0.473351, -0.530638]
])

'''gt'''
# poses = np.zeros((12, 3))

# for i in range(12):
#     theta = np.radians(i * 30)  # Convert angle to radians
#     x = np.cos(theta) - 1   # x-coordinate
#     y = np.sin(theta)  # y-coordinate
#     poses[i] = [x, y, theta]


# 将位姿数据转换为 TUM 格式并打印
for i, pose in enumerate(poses):
    timestamp = i + 1  # 生成随意的时间戳，这里以帧编号作为时间戳
    tx, ty, theta = pose
    tz = 0
    # 创建旋转矩阵并转换为四元数
    rotation = R.from_euler('z', theta, degrees=True)
    qw, qx, qy, qz = rotation.as_quat()
    tum_pose = f"{timestamp} {tx} {ty} {tz} {qx} {qy} {qz} {qw}"
    print(tum_pose)
